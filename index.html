import React, { useState } from 'react';
import { Check, Square, AlertCircle, FileText, Calendar, Clock, Server, HardDrive } from 'lucide-react';

const DattoPilotTemplate = () => {
  const [checkedItems, setCheckedItems] = useState({});

  const toggleCheck = (section, item) => {
    setCheckedItems(prev => ({
      ...prev,
      [`${section}-${item}`]: !prev[`${section}-${item}`]
    }));
  };

  const CheckItem = ({ section, id, text }) => {
    const isChecked = checkedItems[`${section}-${id}`];
    return (
      <div 
        className="flex items-start gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer"
        onClick={() => toggleCheck(section, id)}
      >
        {isChecked ? 
          <Check className="w-5 h-5 text-green-600 flex-shrink-0 mt-0.5" /> : 
          <Square className="w-5 h-5 text-gray-400 flex-shrink-0 mt-0.5" />
        }
        <span className="text-sm text-gray-700">{text}</span>
      </div>
    );
  };

  return (
    <div className="max-w-5xl mx-auto p-8 bg-white">
      {/* Header */}
      <div className="border-b-4 border-blue-600 pb-4 mb-6">
        <h1 className="text-3xl font-bold text-gray-900">TEMPLATE: PRUEBA PILOTO</h1>
        <h2 className="text-xl text-blue-600 mt-2">Soluci√≥n Datto BDR (Backup & Disaster Recovery)</h2>
        <p className="text-sm text-gray-500 mt-2">Documento Interno | Uso: Gesti√≥n de Proyectos</p>
      </div>

      {/* Informaci√≥n del Proyecto */}
      <div className="bg-blue-50 border-l-4 border-blue-600 p-4 mb-6">
        <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
          <FileText className="w-5 h-5" />
          INFORMACI√ìN DEL PROYECTO
        </h3>
        <div className="grid grid-cols-2 gap-4">
          <div>
            <label className="text-xs font-semibold text-gray-600">Cliente:</label>
            <input type="text" className="w-full border border-gray-300 rounded px-2 py-1 mt-1" placeholder="Nombre de la empresa" />
          </div>
          <div>
            <label className="text-xs font-semibold text-gray-600">Fecha de Prueba:</label>
            <input type="date" className="w-full border border-gray-300 rounded px-2 py-1 mt-1" />
          </div>
          <div>
            <label className="text-xs font-semibold text-gray-600">Ingeniero Responsable:</label>
            <input type="text" className="w-full border border-gray-300 rounded px-2 py-1 mt-1" placeholder="Nombre completo" />
          </div>
          <div>
            <label className="text-xs font-semibold text-gray-600">Ventana de Prueba:</label>
            <input type="text" className="w-full border border-gray-300 rounded px-2 py-1 mt-1" placeholder="Ej: S√°bado 2PM - 6PM" />
          </div>
        </div>
      </div>

      {/* Checklist Pre-Prueba */}
      <div className="mb-6 border border-gray-300 rounded-lg p-4">
        <h3 className="font-bold text-lg mb-3 bg-yellow-100 -m-4 p-3 rounded-t-lg">
          ‚úì CHECKLIST PRE-PRUEBA
        </h3>
        <div className="mt-4 space-y-1">
          <CheckItem section="pre" id="1" text="Coordinaci√≥n de fecha y hora confirmada con el cliente" />
          <CheckItem section="pre" id="2" text="Accesos remotos validados (RDP/SSH/VPN)" />
          <CheckItem section="pre" id="3" text="Credenciales de administrador recibidas" />
          <CheckItem section="pre" id="4" text="Appliance Datto registrado y operativo" />
          <CheckItem section="pre" id="5" text="Conectividad de red validada (LAN/VLAN)" />
          <CheckItem section="pre" id="6" text="Informaci√≥n del sistema a proteger documentada" />
          <CheckItem section="pre" id="7" text="Ventana de mantenimiento autorizada por el cliente" />
        </div>
      </div>

      {/* Alcance de la Prueba */}
      <div className="mb-6">
        <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
          <Server className="w-5 h-5" />
          ALCANCE DE LA PRUEBA
        </h3>
        <div className="grid grid-cols-2 gap-4">
          <div className="border border-green-300 bg-green-50 rounded p-3">
            <p className="font-semibold text-green-800 mb-2">‚úì QU√â S√ç SE INCLUYE:</p>
            <textarea 
              className="w-full border border-green-300 rounded px-2 py-1 text-sm h-24"
              placeholder="Ej: 
- Servidor Windows DC01
- VM Linux Ubuntu (Web Server)
- Carpeta compartida /datos"
            />
          </div>
          <div className="border border-red-300 bg-red-50 rounded p-3">
            <p className="font-semibold text-red-800 mb-2">‚úó QU√â NO SE INCLUYE:</p>
            <textarea 
              className="w-full border border-red-300 rounded px-2 py-1 text-sm h-24"
              placeholder="Ej:
- Backup completo de toda la empresa
- DR total con failover
- Migraci√≥n de servidores"
            />
          </div>
        </div>
      </div>

      {/* Informaci√≥n T√©cnica del Sistema */}
      <div className="mb-6">
        <h3 className="font-bold text-lg mb-3">INFORMACI√ìN T√âCNICA DEL SISTEMA A PROTEGER</h3>
        <table className="w-full border-collapse border border-gray-300 text-sm">
          <thead className="bg-gray-100">
            <tr>
              <th className="border border-gray-300 p-2 text-left">Par√°metro</th>
              <th className="border border-gray-300 p-2 text-left">Detalle</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td className="border border-gray-300 p-2 font-semibold">Nombre del Servidor/VM</td>
              <td className="border border-gray-300 p-2">
                <input type="text" className="w-full border-none outline-none" placeholder="Ej: SRV-DC01" />
              </td>
            </tr>
            <tr>
              <td className="border border-gray-300 p-2 font-semibold">Tipo</td>
              <td className="border border-gray-300 p-2">
                <select className="w-full border-none outline-none">
                  <option>Seleccionar...</option>
                  <option>Servidor F√≠sico</option>
                  <option>M√°quina Virtual</option>
                  <option>Servidor en Nube</option>
                </select>
              </td>
            </tr>
            <tr>
              <td className="border border-gray-300 p-2 font-semibold">Sistema Operativo</td>
              <td className="border border-gray-300 p-2">
                <input type="text" className="w-full border-none outline-none" placeholder="Ej: Windows Server 2022, Ubuntu 24.04" />
              </td>
            </tr>
            <tr>
              <td className="border border-gray-300 p-2 font-semibold">Aplicaci√≥n/Servicio Cr√≠tico</td>
              <td className="border border-gray-300 p-2">
                <input type="text" className="w-full border-none outline-none" placeholder="Ej: Active Directory, Apache, Base de datos" />
              </td>
            </tr>
            <tr>
              <td className="border border-gray-300 p-2 font-semibold">Capacidad de Almacenamiento</td>
              <td className="border border-gray-300 p-2">
                <input type="text" className="w-full border-none outline-none" placeholder="Ej: 500 GB" />
              </td>
            </tr>
            <tr>
              <td className="border border-gray-300 p-2 font-semibold">Hipervisor (si aplica)</td>
              <td className="border border-gray-300 p-2">
                <input type="text" className="w-full border-none outline-none" placeholder="Ej: Hyper-V, VMware ESXi" />
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      {/* Configuraci√≥n Implementada */}
      <div className="mb-6 border border-blue-300 bg-blue-50 rounded-lg p-4">
        <h3 className="font-bold text-lg mb-3">CONFIGURACI√ìN IMPLEMENTADA</h3>
        <div className="grid grid-cols-2 gap-4 text-sm">
          <div>
            <p className="font-semibold mb-1">Modelo de Appliance Datto:</p>
            <input type="text" className="w-full border border-gray-300 rounded px-2 py-1" placeholder="Ej: SIRIS 4" />
          </div>
          <div>
            <p className="font-semibold mb-1">Serial del Equipo:</p>
            <input type="text" className="w-full border border-gray-300 rounded px-2 py-1" placeholder="Ej: S4-XXXXXXXX" />
          </div>
          <div>
            <p className="font-semibold mb-1">Agente Instalado:</p>
            <select className="w-full border border-gray-300 rounded px-2 py-1">
              <option>Seleccionar...</option>
              <option>Windows Agent</option>
              <option>Linux Agent</option>
              <option>Agentless (Hypervisor)</option>
            </select>
          </div>
          <div>
            <p className="font-semibold mb-1">Pol√≠tica de Backup:</p>
            <input type="text" className="w-full border border-gray-300 rounded px-2 py-1" placeholder="Ej: Cada 1 hora" />
          </div>
        </div>
      </div>

      {/* Escenarios de Recuperaci√≥n */}
      <div className="mb-6">
        <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
          <HardDrive className="w-5 h-5" />
          ESCENARIOS DE RECUPERACI√ìN A PROBAR
        </h3>
        <div className="space-y-3">
          <div className="border border-gray-300 rounded p-3">
            <div className="flex items-center gap-2 mb-2">
              <input type="checkbox" className="w-4 h-4" />
              <span className="font-semibold">Escenario 1: Recuperaci√≥n de Archivos/Carpetas (Borrado L√≥gico)</span>
            </div>
            <textarea 
              className="w-full border border-gray-200 rounded px-2 py-1 text-sm"
              placeholder="Descripci√≥n: Ej: Se eliminaron archivos de la carpeta /Documentos. Se restauraron desde el punto de recuperaci√≥n de las 10:00 AM"
              rows="2"
            />
          </div>
          
          <div className="border border-gray-300 rounded p-3">
            <div className="flex items-center gap-2 mb-2">
              <input type="checkbox" className="w-4 h-4" />
              <span className="font-semibold">Escenario 2: Recuperaci√≥n de Volumen/Partici√≥n</span>
            </div>
            <textarea 
              className="w-full border border-gray-200 rounded px-2 py-1 text-sm"
              placeholder="Descripci√≥n: Ej: Se restaur√≥ la partici√≥n completa del disco C:\ al estado de ayer a las 6:00 PM"
              rows="2"
            />
          </div>
          
          <div className="border border-gray-300 rounded p-3">
            <div className="flex items-center gap-2 mb-2">
              <input type="checkbox" className="w-4 h-4" />
              <span className="font-semibold">Escenario 3: Virtualizaci√≥n Instant√°nea (Bare Metal Recovery)</span>
            </div>
            <textarea 
              className="w-full border border-gray-200 rounded px-2 py-1 text-sm"
              placeholder="Descripci√≥n: Ej: Se virtualiz√≥ el servidor completo en el appliance Datto. El sistema qued√≥ operativo en 15 minutos"
              rows="2"
            />
          </div>
        </div>
      </div>

      {/* M√©tricas Medidas */}
      <div className="mb-6">
        <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
          <Clock className="w-5 h-5" />
          M√âTRICAS OBTENIDAS
        </h3>
        <table className="w-full border-collapse border border-gray-300 text-sm">
          <thead className="bg-gray-100">
            <tr>
              <th className="border border-gray-300 p-2">M√©trica</th>
              <th className="border border-gray-300 p-2">Objetivo</th>
              <th className="border border-gray-300 p-2">Resultado</th>
              <th className="border border-gray-300 p-2">Estado</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td className="border border-gray-300 p-2 font-semibold">RTO (Recovery Time Objective)</td>
              <td className="border border-gray-300 p-2">
                <input type="text" className="w-full text-center" placeholder="Ej: < 30 min" />
              </td>
              <td className="border border-gray-300 p-2">
                <input type="text" className="w-full text-center" placeholder="Ej: 12 min" />
              </td>
              <td className="border border-gray-300 p-2 text-center">
                <select className="border border-gray-300 rounded px-2 py-1">
                  <option>-</option>
                  <option>‚úì Cumplido</option>
                  <option>‚úó No Cumplido</option>
                </select>
              </td>
            </tr>
            <tr>
              <td className="border border-gray-300 p-2 font-semibold">RPO (Recovery Point Objective)</td>
              <td className="border border-gray-300 p-2">
                <input type="text" className="w-full text-center" placeholder="Ej: < 1 hora" />
              </td>
              <td className="border border-gray-300 p-2">
                <input type="text" className="w-full text-center" placeholder="Ej: 30 min" />
              </td>
              <td className="border border-gray-300 p-2 text-center">
                <select className="border border-gray-300 rounded px-2 py-1">
                  <option>-</option>
                  <option>‚úì Cumplido</option>
                  <option>‚úó No Cumplido</option>
                </select>
              </td>
            </tr>
            <tr>
              <td className="border border-gray-300 p-2 font-semibold">Integridad de Datos</td>
              <td className="border border-gray-300 p-2 text-center">100%</td>
              <td className="border border-gray-300 p-2">
                <input type="text" className="w-full text-center" placeholder="Ej: 100%" />
              </td>
              <td className="border border-gray-300 p-2 text-center">
                <select className="border border-gray-300 rounded px-2 py-1">
                  <option>-</option>
                  <option>‚úì Cumplido</option>
                  <option>‚úó No Cumplido</option>
                </select>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      {/* Checklist Durante la Prueba */}
      <div className="mb-6 border border-gray-300 rounded-lg p-4">
        <h3 className="font-bold text-lg mb-3 bg-blue-100 -m-4 p-3 rounded-t-lg">
          ‚úì CHECKLIST DURANTE LA PRUEBA
        </h3>
        <div className="mt-4 space-y-1">
          <CheckItem section="during" id="1" text="Backup inicial completado exitosamente" />
          <CheckItem section="during" id="2" text="Puntos de recuperaci√≥n creados y verificados" />
          <CheckItem section="during" id="3" text="Escenario(s) de recuperaci√≥n ejecutado(s)" />
          <CheckItem section="during" id="4" text="Datos restaurados validados por el cliente" />
          <CheckItem section="during" id="5" text="Screenshots y evidencias capturadas" />
          <CheckItem section="during" id="6" text="Tiempos de recuperaci√≥n documentados" />
          <CheckItem section="during" id="7" text="Sistema productivo no afectado" />
        </div>
      </div>

      {/* Validaci√≥n del Cliente */}
      <div className="mb-6 border border-green-300 bg-green-50 rounded-lg p-4">
        <h3 className="font-bold text-lg mb-3">VALIDACI√ìN Y CONFORMIDAD DEL CLIENTE</h3>
        <div className="space-y-3">
          <div>
            <label className="text-sm font-semibold">¬øEl cliente valid√≥ que los datos recuperados son correctos?</label>
            <div className="flex gap-4 mt-1">
              <label className="flex items-center gap-2">
                <input type="radio" name="validation" />
                <span className="text-sm">‚úì S√≠</span>
              </label>
              <label className="flex items-center gap-2">
                <input type="radio" name="validation" />
                <span className="text-sm">‚úó No</span>
              </label>
            </div>
          </div>
          <div>
            <label className="text-sm font-semibold">Comentarios del cliente:</label>
            <textarea 
              className="w-full border border-gray-300 rounded px-2 py-1 mt-1"
              rows="3"
              placeholder="Observaciones o feedback del cliente sobre la prueba..."
            />
          </div>
        </div>
      </div>

      {/* Observaciones y Oportunidades */}
      <div className="mb-6">
        <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
          <AlertCircle className="w-5 h-5" />
          OBSERVACIONES Y OPORTUNIDADES IDENTIFICADAS
        </h3>
        <textarea 
          className="w-full border border-gray-300 rounded px-3 py-2"
          rows="4"
          placeholder="Ejemplo:
- El cliente no cuenta con respaldo de su base de datos SQL (oportunidad de expansi√≥n)
- Se identific√≥ que hay 3 servidores adicionales sin protecci√≥n
- El cliente mencion√≥ inter√©s en replicaci√≥n a la nube
- Requiere capacitaci√≥n en uso del portal Datto"
        />
      </div>

      {/* Checklist Post-Prueba */}
      <div className="mb-6 border border-gray-300 rounded-lg p-4">
        <h3 className="font-bold text-lg mb-3 bg-green-100 -m-4 p-3 rounded-t-lg">
          ‚úì CHECKLIST POST-PRUEBA
        </h3>
        <div className="mt-4 space-y-1">
          <CheckItem section="post" id="1" text="Sistema productivo restaurado a su estado original" />
          <CheckItem section="post" id="2" text="Anexo t√©cnico con evidencias completado" />
          <CheckItem section="post" id="3" text="M√©tricas documentadas y validadas" />
          <CheckItem section="post" id="4" text="Conformidad del cliente obtenida" />
          <CheckItem section="post" id="5" text="Reporte ejecutivo preparado para env√≠o" />
          <CheckItem section="post" id="6" text="Oportunidades comerciales identificadas y reportadas" />
        </div>
      </div>

      {/* Anexos */}
      <div className="mb-6 bg-gray-50 border border-gray-300 rounded p-4">
        <h3 className="font-bold text-lg mb-2">ANEXOS T√âCNICOS</h3>
        <p className="text-sm text-gray-600 mb-2">Documentos de soporte detallado (referencia):</p>
        <div className="space-y-1 text-sm">
          <div className="flex items-center gap-2">
            <input type="checkbox" className="w-4 h-4" />
            <span>Anexo A: Capturas de pantalla del proceso de instalaci√≥n</span>
          </div>
          <div className="flex items-center gap-2">
            <input type="checkbox" className="w-4 h-4" />
            <span>Anexo B: Evidencias de las pruebas de recuperaci√≥n</span>
          </div>
          <div className="flex items-center gap-2">
            <input type="checkbox" className="w-4 h-4" />
            <span>Anexo C: Logs y reportes t√©cnicos del appliance Datto</span>
          </div>
          <div className="flex items-center gap-2">
            <input type="checkbox" className="w-4 h-4" />
            <span>Anexo D: Diagrama de infraestructura (si aplica)</span>
          </div>
        </div>
      </div>

      {/* Footer */}
      <div className="border-t-2 border-gray-300 pt-4 mt-8">
        <div className="grid grid-cols-2 gap-4 text-sm">
          <div>
            <p className="font-semibold">Elaborado por:</p>
            <input type="text" className="w-full border-b border-gray-300 mt-2" />
            <p className="text-xs text-gray-500 mt-1">Nombre y firma del ingeniero</p>
          </div>
          <div>
            <p className="font-semibold">Fecha de elaboraci√≥n:</p>
            <input type="date" className="w-full border-b border-gray-300 mt-2" />
          </div>
        </div>
      </div>

      {/* Nota final */}
      <div className="mt-6 p-3 bg-yellow-50 border-l-4 border-yellow-500 text-sm">
        <p className="font-semibold">üìå Nota Importante:</p>
        <p className="text-gray-700 mt-1">Este documento es de uso interno. Para generar el reporte ejecutivo del cliente, utilizar los datos de este template junto con el Anexo T√©cnico correspondiente.</p>
      </div>
    </div>
  );
};

export default DattoPilotTemplate;
